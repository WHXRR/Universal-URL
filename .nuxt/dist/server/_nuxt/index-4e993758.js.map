{"version":3,"file":"index-4e993758.js","sources":["../../../../src/pages/provide/index.vue"],"sourcesContent":["<script setup>\r\nimport urlRegex from \"url-regex\";\r\nconst url = useURL();\r\nconst sitesClassification = await useFetch(\r\n  `${url}/api/getSitesClassification`,\r\n  {\r\n    method: \"POST\",\r\n    transform: (data) => data.data,\r\n  }\r\n)?.data;\r\n\r\nconst formData = reactive({\r\n  classificationID: \"\",\r\n  classificationName: \"\",\r\n  siteName: \"\",\r\n  introduction: \"\",\r\n  siteUrl: \"\",\r\n});\r\nconst isValidUrl = (url) => {\r\n  return urlRegex({ exact: true, strict: false }).test(url);\r\n};\r\nconst submit = async () => {\r\n  if (\r\n    formData.classificationID === \"\" ||\r\n    !formData.siteName ||\r\n    !formData.siteUrl\r\n  ) {\r\n    return alert(\"请填写完整\");\r\n  }\r\n  if (formData.classificationID === 0 && !formData.classificationName) {\r\n    return alert(\"请输入分类名称\");\r\n  }\r\n  if (!isValidUrl(formData.siteUrl)) {\r\n    return alert(\"请输入正确的网址\");\r\n  }\r\n  const { data } = await useFetch(`${url}/api/addSite`, {\r\n    method: \"POST\",\r\n    transform: (data) => data.data,\r\n    body: formData,\r\n  });\r\n};\r\n</script>\r\n<template>\r\n  <div flex justify-center bg-light-100 p-4 w-full>\r\n    <div w-full mx-auto flex flex-col style=\"max-width: 300px\">\r\n      <div mb-4 flex items-center gap-2 text-3.6 font-bold>\r\n        <div class=\"w-20%\" text-right>选择分类</div>\r\n        <select\r\n          flex-1\r\n          p-2\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          outline-none\r\n          cursor-pointer\r\n          v-model=\"formData.classificationID\"\r\n        >\r\n          <option\r\n            :value=\"item.id\"\r\n            v-for=\"item in sitesClassification\"\r\n            :key=\"item.id\"\r\n          >\r\n            {{ item.title }}\r\n          </option>\r\n          <option :value=\"0\">没有想要的分类，重新创建</option>\r\n        </select>\r\n      </div>\r\n      <div\r\n        mb-4\r\n        flex\r\n        items-center\r\n        gap-2\r\n        text-3.6\r\n        font-bold\r\n        v-if=\"formData.classificationID === 0\"\r\n      >\r\n        <div class=\"w-20%\" text-right>分类名称</div>\r\n        <input\r\n          flex-1\r\n          type=\"text\"\r\n          p-2\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          outline-none\r\n          v-model=\"formData.classificationName\"\r\n        />\r\n      </div>\r\n      <div mb-4 flex items-center gap-2 text-3.6 font-bold>\r\n        <div class=\"w-20%\" text-right>网站名称</div>\r\n        <input\r\n          flex-1\r\n          type=\"text\"\r\n          p-2\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          outline-none\r\n          v-model=\"formData.siteName\"\r\n        />\r\n      </div>\r\n      <div mb-4 flex items-center gap-2 text-3.6 font-bold>\r\n        <div class=\"w-20%\" text-right>网站介绍</div>\r\n        <input\r\n          flex-1\r\n          type=\"text\"\r\n          p-2\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          outline-none\r\n          v-model=\"formData.introduction\"\r\n        />\r\n      </div>\r\n      <div mb-4 flex items-center gap-2 text-3.6 font-bold>\r\n        <div class=\"w-20%\" text-right>网址</div>\r\n        <input\r\n          flex-1\r\n          type=\"text\"\r\n          p-2\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          outline-none\r\n          v-model=\"formData.siteUrl\"\r\n        />\r\n      </div>\r\n      <div mb-4 flex items-center gap-2 text-3.6 font-bold>\r\n        <div class=\"w-20%\" text-right></div>\r\n        <button\r\n          flex-1\r\n          bg-dark-300\r\n          color-light-300\r\n          rounded-1.4\r\n          border-2\r\n          b-solid\r\n          b-dark-300\r\n          p-2\r\n          cursor-pointer\r\n          @click=\"submit\"\r\n        >\r\n          submit\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,UAAM,MAAM,OAAM;AAClB,UAAM;;AAA4B;AAAA,QAChC,GAAG;AAAA,QACH;AAAA,UACE,QAAQ;AAAA,UACR,WAAW,CAAC,SAAS,KAAK;AAAA,QAC3B;AAAA;MACH,MANkC,mBAM/B;AAAA,KAAG;AAEN,UAAM,WAAW,SAAS;AAAA,MACxB,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,MACpB,UAAU;AAAA,MACV,cAAc;AAAA,MACd,SAAS;AAAA,IACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}